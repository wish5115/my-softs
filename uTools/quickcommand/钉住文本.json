{
    "program": "quickcomposer",
    "features": {
        "cmds": [
            "钉住文本",
            "pinText",
            "钉住文本配置",
            "钉住文本帮助",
            {
                "label": "钉住文本",
                "type": "over"
            }
        ],
        "code": "key_f0e6eba1",
        "explain": "钉住文本",
        "icon": "data:image/png;base64,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",
        "mainHide": false,
        "mainPush": false,
        "platform": [
            "win32",
            "linux",
            "darwin"
        ]
    },
    "output": "html",
    "tags": [
        "工具"
    ],
    "flows": [
        {
            "commands": [
                {
                    "value": "quickcommand.userData.get",
                    "argvs": [
                        "webdav"
                    ],
                    "code": "quickcommand.userData.get(\"webdav\")",
                    "id": "d73dd296-0b5f-48ef-9708-1d54c899438d",
                    "isCollapsed": true,
                    "outputVariable": {
                        "name": "webdavConfig"
                    },
                    "subCommand": "quickcommand.userData.get"
                },
                {
                    "value": "JSON.stringify",
                    "argvs": [
                        {
                            "__varInputVal__": true,
                            "isString": false,
                            "value": "webdavConfig"
                        },
                        {
                            "__varInputVal__": true,
                            "isString": false,
                            "value": "null"
                        },
                        2
                    ],
                    "code": "JSON.stringify(webdavConfig,null,2)",
                    "id": "e1d62dad-3eea-471d-a1da-3852ce9bba5a",
                    "isCollapsed": true,
                    "outputVariable": {
                        "name": "webdavConfig"
                    },
                    "subCommand": "JSON.stringify"
                },
                {
                    "value": "condition",
                    "isControlFlow": true,
                    "commandChain": [
                        "if",
                        "end"
                    ],
                    "argvs": {
                        "condition": "quickcommand.enterData.payload === '钉住文本配置'"
                    },
                    "chainId": "2e76a9d1-96cd-42f7-bd34-1e48017f3755",
                    "code": "if (quickcommand.enterData.payload === '钉住文本配置') {",
                    "commandType": "if",
                    "id": "e7ede204-b41d-450c-a61c-129049a30a51",
                    "isCollapsed": true
                },
                {
                    "value": "createCodeSnippet",
                    "description": "单纯将代码片段赋值到变量中，不会执行",
                    "argvs": {
                        "args": [],
                        "code": "<!DOCTYPE html>\n<html lang=\"zh\">\n\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  <title>WebDAV 配置</title>\n  <style>\n    body {\n      font-family: 'Arial', sans-serif;\n      background-color: #f9f9f9;\n      margin: 0;\n      padding:0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      min-height: 100vh;\n    }\n\n    .container {\n      width: 400px;\n      padding: 20px;\n      background-color: white;\n      border-radius: 10px;\n      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n      border: 2px solid #000;\n    }\n\n    h2 {\n      text-align: center;\n      margin-top: 0;\n      color: #333;\n    }\n\n    .form-group {\n      margin-bottom: 15px;\n    }\n\n    label {\n      display: block;\n      margin-bottom: 5px;\n      font-size: 18px;\n      color: #333;\n    }\n\n    input[type=\"text\"],\n    input[type=\"password\"] {\n      width: 100%;\n      padding: 10px;\n      border: 2px solid #000;\n      border-radius: 10px;\n      font-size: 16px;\n      box-sizing: border-box;\n      outline: none;\n    }\n\n    input[type=\"text\"]:focus,\n    input[type=\"password\"]:focus {\n      border-color: #007bff;\n    }\n\n    .btn-save {\n      background-color: #a0d8f0;\n      color: #000;\n      border: 2px solid #000;\n      border-radius: 10px;\n      padding: 10px 20px;\n      font-size: 16px;\n      cursor: pointer;\n      width: 100px;\n      margin: 0 auto;\n      display: block;\n    }\n\n    .btn-save:hover {\n      background-color: #7ab8e0;\n    }\n  </style>\n</head>\n\n<body>\n  <div class=\"container\">\n    <h2>WebDAV 配置</h2>\n    <form id=\"webdavForm\">\n      <div class=\"form-group\">\n        <label for=\"url\">URL</label>\n        <input type=\"text\" id=\"url\" name=\"url\" placeholder=\"请输入URL\" required />\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"username\">用户</label>\n        <input type=\"text\" id=\"username\" name=\"username\" placeholder=\"请输入用户名\" required />\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"password\">密码</label>\n        <input type=\"password\" id=\"password\" name=\"password\" placeholder=\"请输入密码\" required />\n      </div>\n\n      <button type=\"submit\" class=\"btn-save\">保存</button>\n    </form>\n  </div>\n\n  <script>\n    let webdav = ___webdavConfig___;\n    const url = document.getElementById('url');\n    const username = document.getElementById('username');\n    const password = document.getElementById('password');\n    if(webdav && webdav.url) url.value = webdav.url;\n    if(webdav &&webdav.username) username.value = webdav.username;\n    if(webdav &&webdav.password) password.value = webdav.password;\n    document.getElementById('webdavForm').addEventListener('submit', async function(e) {\n      e.preventDefault();\n      const config = {\n        url: url.value.trim(),\n        username: username.value.trim(),\n        password: password.value,\n      }\n      await quickcommand.userData.put(config, \"webdav\", false);\n      console.log('配置已保存！');\n    });\n  </script>\n</body>\n\n</html>",
                        "language": "html",
                        "outputCode": null,
                        "runInTerminal": null,
                        "scriptCode": null
                    },
                    "code": "quickcomposer.coding.base64Decode(\"PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InpoIj4KCjxoZWFkPgogIDxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPgogIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIiAvPgogIDx0aXRsZT5XZWJEQVYg6YWN572uPC90aXRsZT4KICA8c3R5bGU+CiAgICBib2R5IHsKICAgICAgZm9udC1mYW1pbHk6ICdBcmlhbCcsIHNhbnMtc2VyaWY7CiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7CiAgICAgIG1hcmdpbjogMDsKICAgICAgcGFkZGluZzowOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgbWluLWhlaWdodDogMTAwdmg7CiAgICB9CgogICAgLmNvbnRhaW5lciB7CiAgICAgIHdpZHRoOiA0MDBweDsKICAgICAgcGFkZGluZzogMjBweDsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMwMDA7CiAgICB9CgogICAgaDIgewogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgIG1hcmdpbi10b3A6IDA7CiAgICAgIGNvbG9yOiAjMzMzOwogICAgfQoKICAgIC5mb3JtLWdyb3VwIHsKICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDsKICAgIH0KCiAgICBsYWJlbCB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgICAgY29sb3I6ICMzMzM7CiAgICB9CgogICAgaW5wdXRbdHlwZT0idGV4dCJdLAogICAgaW5wdXRbdHlwZT0icGFzc3dvcmQiXSB7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBwYWRkaW5nOiAxMHB4OwogICAgICBib3JkZXI6IDJweCBzb2xpZCAjMDAwOwogICAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgIG91dGxpbmU6IG5vbmU7CiAgICB9CgogICAgaW5wdXRbdHlwZT0idGV4dCJdOmZvY3VzLAogICAgaW5wdXRbdHlwZT0icGFzc3dvcmQiXTpmb2N1cyB7CiAgICAgIGJvcmRlci1jb2xvcjogIzAwN2JmZjsKICAgIH0KCiAgICAuYnRuLXNhdmUgewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYTBkOGYwOwogICAgICBjb2xvcjogIzAwMDsKICAgICAgYm9yZGVyOiAycHggc29saWQgIzAwMDsKICAgICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgICAgcGFkZGluZzogMTBweCAyMHB4OwogICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgd2lkdGg6IDEwMHB4OwogICAgICBtYXJnaW46IDAgYXV0bzsKICAgICAgZGlzcGxheTogYmxvY2s7CiAgICB9CgogICAgLmJ0bi1zYXZlOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzdhYjhlMDsKICAgIH0KICA8L3N0eWxlPgo8L2hlYWQ+Cgo8Ym9keT4KICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPgogICAgPGgyPldlYkRBViDphY3nva48L2gyPgogICAgPGZvcm0gaWQ9IndlYmRhdkZvcm0iPgogICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICA8bGFiZWwgZm9yPSJ1cmwiPlVSTDwvbGFiZWw+CiAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJ1cmwiIG5hbWU9InVybCIgcGxhY2Vob2xkZXI9Iuivt+i+k+WFpVVSTCIgcmVxdWlyZWQgLz4KICAgICAgPC9kaXY+CgogICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICA8bGFiZWwgZm9yPSJ1c2VybmFtZSI+55So5oi3PC9sYWJlbD4KICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InVzZXJuYW1lIiBuYW1lPSJ1c2VybmFtZSIgcGxhY2Vob2xkZXI9Iuivt+i+k+WFpeeUqOaIt+WQjSIgcmVxdWlyZWQgLz4KICAgICAgPC9kaXY+CgogICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICA8bGFiZWwgZm9yPSJwYXNzd29yZCI+5a+G56CBPC9sYWJlbD4KICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJwYXNzd29yZCIgbmFtZT0icGFzc3dvcmQiIHBsYWNlaG9sZGVyPSLor7fovpPlhaXlr4bnoIEiIHJlcXVpcmVkIC8+CiAgICAgIDwvZGl2PgoKICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJidG4tc2F2ZSI+5L+d5a2YPC9idXR0b24+CiAgICA8L2Zvcm0+CiAgPC9kaXY+CgogIDxzY3JpcHQ+CiAgICBsZXQgd2ViZGF2ID0gX19fd2ViZGF2Q29uZmlnX19fOwogICAgY29uc3QgdXJsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VybCcpOwogICAgY29uc3QgdXNlcm5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWUnKTsKICAgIGNvbnN0IHBhc3N3b3JkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkJyk7CiAgICBpZih3ZWJkYXYgJiYgd2ViZGF2LnVybCkgdXJsLnZhbHVlID0gd2ViZGF2LnVybDsKICAgIGlmKHdlYmRhdiAmJndlYmRhdi51c2VybmFtZSkgdXNlcm5hbWUudmFsdWUgPSB3ZWJkYXYudXNlcm5hbWU7CiAgICBpZih3ZWJkYXYgJiZ3ZWJkYXYucGFzc3dvcmQpIHBhc3N3b3JkLnZhbHVlID0gd2ViZGF2LnBhc3N3b3JkOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dlYmRhdkZvcm0nKS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBhc3luYyBmdW5jdGlvbihlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgY29uc3QgY29uZmlnID0gewogICAgICAgIHVybDogdXJsLnZhbHVlLnRyaW0oKSwKICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUudmFsdWUudHJpbSgpLAogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZC52YWx1ZSwKICAgICAgfQogICAgICBhd2FpdCBxdWlja2NvbW1hbmQudXNlckRhdGEucHV0KGNvbmZpZywgIndlYmRhdiIsIGZhbHNlKTsKICAgICAgY29uc29sZS5sb2coJ+mFjee9ruW3suS/neWtmO+8gScpOwogICAgfSk7CiAgPC9zY3JpcHQ+CjwvYm9keT4KCjwvaHRtbD4=\").replace('___webdavConfig___', webdavConfig)",
                    "id": "54dcbfe1-bcef-4677-8e9c-e2d4a3d101fd",
                    "isCollapsed": true,
                    "outputVariable": {
                        "name": "configSnippet"
                    },
                    "userComments": "webdav配置表单"
                },
                {
                    "value": "console.log",
                    "neverHasOutput": true,
                    "argvs": [
                        {
                            "__varInputVal__": true,
                            "isString": false,
                            "value": "configSnippet"
                        }
                    ],
                    "code": "console.log(configSnippet)",
                    "id": "c2dfeeb5-ae1a-4468-a04b-0d839f93cdca",
                    "isCollapsed": true,
                    "subCommand": "console.log"
                },
                {
                    "value": "return",
                    "neverHasOutput": true,
                    "argvs": {
                        "returnValue": {
                            "__varInputVal__": true,
                            "isString": false,
                            "value": ""
                        }
                    },
                    "code": "return ",
                    "id": "810aba1c-84a7-49b1-b738-0a1c579b9806",
                    "isCollapsed": true
                },
                {
                    "value": "condition",
                    "isControlFlow": true,
                    "commandChain": [
                        "if",
                        "end"
                    ],
                    "argvs": {},
                    "chainId": "2e76a9d1-96cd-42f7-bd34-1e48017f3755",
                    "code": "};",
                    "commandType": "end",
                    "id": "44596c88-2a8d-481e-8529-a376dda27896"
                },
                {
                    "value": "condition",
                    "isControlFlow": true,
                    "commandChain": [
                        "if",
                        "end"
                    ],
                    "argvs": {
                        "condition": "quickcommand.enterData.payload === '钉住文本帮助'"
                    },
                    "chainId": "b69f59c8-14c5-4fcd-b1fe-4685da471b82",
                    "code": "if (quickcommand.enterData.payload === '钉住文本帮助') {",
                    "commandType": "if",
                    "id": "405bb325-27fd-4c1c-a910-6b9b9eda0a07",
                    "isCollapsed": true
                },
                {
                    "value": "injectJs",
                    "description": "注入的代码（js）将在流程对应的位置直接运行。",
                    "neverHasOutput": true,
                    "isExpression": true,
                    "argvs": [
                        "let help = `\n## 钉住文本使用帮助\n### 简介\n钉住文本，弹出前台置顶的小窗口，方便临时对照修改等，支持简单富文本，可粘贴图片。\n\n<img width=\"400\" src=\"https://qc.qaz.ink/common/uploadfile/getfile?url=resource/uploads/markdown/20250901/372e03e75a78d509dd9c38966c8d7e95.png\" />\n\n### 使用\n1. 在主窗口输入文本，选择钉住文本即可钉住。\n2. 主窗口直接输入“钉住文本”关键词，则打开钉住文本窗口，显示上次输入的文本。\n3. 当已有文本的情况先，主窗口输入文字并选择钉住文本，则新输入的文字会出插入到最上面。\n4. 如果你同时打开多个钉住文本窗口，这多个窗口之间会自动同步数据。\n\n### 快捷键\n- Ctrl + B 加粗\n- Ctrl + I 斜体\n- Ctrl + U 下划线\n- Ctrl + Shift + S 删除线\n- Ctrl + Shift + C 文字标红\n- Ctrl + K 添加链接\n- Ctrl + Shift + H 添加分割线\n- Ctrl + \\\\ 清除格式\n- Alt + S 保存窗口大小和位置\n- Alt + D 删除窗口大小和位置\n- Alt + R 开启同步\n- Alt + T 停止同步\n- Alt + H 打开快捷键列表\n\n### 同步\n1. 在主窗口输入“钉住文本配置”打开WebDav配置页面\n2. 配置完成后，在钉住文本窗口按Alt+R即可开启同步，按Alt+tT停止同步（顶部线条绿色代表同步成功，橘色代表同步中，红色代表同步失败，无色代表未开启同步功能）\n3. WebDav推荐<a href=\"javascript:;\" onclick=\"utools.shellOpenExternal('https://infini-cloud.net')\">https://infini-cloud.net</a>，注册成功后，在My Page页面输入 QEU7Z 这个推荐码可额外赠送5G。\n\n### 注意事项\n1. 暂不支持uTools的多端同步（不过有WebDav同步），由于使用ubrowser做UI，暂不知ubrowser内部如何调用上层utools的代码，貌似不支持。\n2. 如果你未开启同步且修改了脚本，你之前的本地数据可能被重置，因此修改前请做好备份工作。\n3. 此程序是临时缓存级别的应用且尚处于实验阶段，，请勿用于保存重要数据，由此造成的任何后果，作者不承担任何责任。\n`\nhelp = quickcommand.markdownParse(help);\nconsole.log(help);\nreturn;"
                    ],
                    "code": "let help = `\n## 钉住文本使用帮助\n### 简介\n钉住文本，弹出前台置顶的小窗口，方便临时对照修改等，支持简单富文本，可粘贴图片。\n\n<img width=\"400\" src=\"https://qc.qaz.ink/common/uploadfile/getfile?url=resource/uploads/markdown/20250901/372e03e75a78d509dd9c38966c8d7e95.png\" />\n\n### 使用\n1. 在主窗口输入文本，选择钉住文本即可钉住。\n2. 主窗口直接输入“钉住文本”关键词，则打开钉住文本窗口，显示上次输入的文本。\n3. 当已有文本的情况先，主窗口输入文字并选择钉住文本，则新输入的文字会出插入到最上面。\n4. 如果你同时打开多个钉住文本窗口，这多个窗口之间会自动同步数据。\n\n### 快捷键\n- Ctrl + B 加粗\n- Ctrl + I 斜体\n- Ctrl + U 下划线\n- Ctrl + Shift + S 删除线\n- Ctrl + Shift + C 文字标红\n- Ctrl + K 添加链接\n- Ctrl + Shift + H 添加分割线\n- Ctrl + \\\\ 清除格式\n- Alt + S 保存窗口大小和位置\n- Alt + D 删除窗口大小和位置\n- Alt + R 开启同步\n- Alt + T 停止同步\n- Alt + H 打开快捷键列表\n\n### 同步\n1. 在主窗口输入“钉住文本配置”打开WebDav配置页面\n2. 配置完成后，在钉住文本窗口按Alt+R即可开启同步，按Alt+tT停止同步（顶部线条绿色代表同步成功，橘色代表同步中，红色代表同步失败，无色代表未开启同步功能）\n3. WebDav推荐<a href=\"javascript:;\" onclick=\"utools.shellOpenExternal('https://infini-cloud.net')\">https://infini-cloud.net</a>，注册成功后，在My Page页面输入 QEU7Z 这个推荐码可额外赠送5G。\n\n### 注意事项\n1. 暂不支持uTools的多端同步（不过有WebDav同步），由于使用ubrowser做UI，暂不知ubrowser内部如何调用上层utools的代码，貌似不支持。\n2. 如果你未开启同步且修改了脚本，你之前的本地数据可能被重置，因此修改前请做好备份工作。\n3. 此程序是临时缓存级别的应用且尚处于实验阶段，，请勿用于保存重要数据，由此造成的任何后果，作者不承担任何责任。\n`\nhelp = quickcommand.markdownParse(help);\nconsole.log(help);\nreturn;",
                    "id": "b66373dd-61d6-4359-afed-09b429706a0f",
                    "isCollapsed": true,
                    "subCommand": "injectJs",
                    "userComments": "帮助文档"
                },
                {
                    "value": "condition",
                    "isControlFlow": true,
                    "commandChain": [
                        "if",
                        "end"
                    ],
                    "argvs": {},
                    "chainId": "b69f59c8-14c5-4fcd-b1fe-4685da471b82",
                    "code": "};",
                    "commandType": "end",
                    "id": "938b46f7-b319-4847-89fa-4a67f9c298df"
                },
                {
                    "value": "createCodeSnippet",
                    "description": "单纯将代码片段赋值到变量中，不会执行",
                    "argvs": {
                        "args": [],
                        "code": "<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <title>钉住文本📌</title>\n  <style>\n    body {\n      height: calc(100vh - 16px);\n      border-top: 0.5px solid white;\n      margin: 0;\n      padding: 7.7px;\n    }\n  </style>\n  <script type=\"module\">\n    import {createClient} from 'https://jsd.onmicrosoft.cn/npm/webdav@5.8.0/+esm';\n    let webdav = ___webdavConfig___;\n    window.webdavClient = null;\n    if(webdav) {\n      window.webdavClient = createClient(webdav.url, {\n        username: webdav.username,\n        password: webdav.password\n      });\n    }\n  </script>\n  <script>\n    let payload = \"___quickcommand.enterData.payload___\";\n    let isSync = localStorage.getItem('isSync') === 'true';\n    // 加载执行\n    document.addEventListener('DOMContentLoaded', async () => {\n      if(!window.webdavClient && localStorage.getItem('isFirst') === null) {\n        localStorage.setItem('isFirst', true);\n        alert('支持WebDav同步，可在uTools中输入“钉住文本配置”，去配置WebDav，该提示仅第一次打开时显示！');\n      }\n      if(isSync && !window.webdavClient) {\n        isSync = false;\n        localStorage.setItem('isSync', false);\n        alert('无法同步数据，请先在uTools中输入“钉住文本配置”，去配置WebDav');\n      }\n      const editor = document.getElementById(\"editor\");\n      const html = isSync ? await getWebDavFile() : (localStorage.getItem(\"pinText\")||\"\");\n      editor.innerHTML = html;\n      const hasPayload = !(payload === \"钉住文本\" || payload === \"pinText\") && payload;\n      if(hasPayload) {\n        editor.innerHTML = editor.textContent ? payload + \"<hr />\" + html : payload;\n        localStorage.setItem(\"pinText\", editor.innerHTML);\n        if(isSync) syncFile();\n      }\n      setTimeout(()=> editor.focus(), 100);\n      // 输入事件\n      editor.addEventListener('input', () => {\n        localStorage.setItem(\"pinText\", editor.innerHTML);\n        if(isSync) syncFile();\n      });\n      // 监听数据变化\n      window.addEventListener('storage', function(e) {\n        if (e.key === 'pinText') {\n          editor.innerHTML = e.newValue;\n          if(isSync) syncFile();\n        }\n      });\n\n      // 自定义快捷键\n      editor.addEventListener('keydown', function(e) {\n        // 检测 Ctrl + Shift + S （或 Mac 上的 Cmd + Shift + S）\n        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.code === 'KeyS' && !e.altKey) {\n          e.preventDefault(); // 阻止默认保存行为\n          // 执行删除线命令\n          document.execCommand('strikethrough', false, null);\n          // 可选：聚焦回编辑器（确保光标位置正确）\n          setTimeout(() => editor.focus(), 0);\n        }\n        // ctrl+k 添加链接\n        if ((e.ctrlKey || e.metaKey) && e.code === 'KeyK' && !e.altKey && !e.shiftKey) {\n          e.preventDefault();\n          if(getCursorElement()?.closest('a[href]')){\n            document.execCommand('unlink', false, null);\n          } else {\n            const selection = window.getSelection();\n            const selectedText = selection.toString().trim();\n            if(selectedText && /^https?:\\/\\//i.test(selectedText)) document.execCommand('createLink', false, selectedText);\n          }\n          setTimeout(() => editor.focus(), 0);\n        }\n        // ctrl+shift+c 标红\n        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.code === 'KeyC' && !e.altKey) {\n          e.preventDefault();\n          if(getCursorElement()?.closest('font[color]')) document.execCommand('removeFormat', false, null);\n          else document.execCommand('foreColor', false, \"#FF0000\");\n          setTimeout(() => editor.focus(), 0);\n        }\n        // 清除格式 ctrl+\\\n        if ((e.ctrlKey || e.metaKey) && e.code === 'Backslash' && !e.altKey && !e.shiftKey) {\n          e.preventDefault();\n          document.execCommand('removeFormat', false, null);\n          document.execCommand('unlink', false, null);\n        }\n        // Ctrl+Shift+H 添加hr分割线\n        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.code === 'KeyH' && !e.altKey) {\n          e.preventDefault();\n          document.execCommand('insertHorizontalRule', false, null);\n        }\n        // Atl+H 查看帮助\n        if (e.altKey && e.code === 'KeyH' && !e.ctrlKey && !e.metaKey && !e.shiftKey) {\n          e.preventDefault();\n          const help = `\n            快捷键：\n            Ctrl + B 加粗\n            Ctrl + I 斜体\n            Ctrl + U 下划线\n            Ctrl + Shift + S 删除线\n            Ctrl + Shift + C 文字标红\n            Ctrl + K 添加链接\n            Ctrl + Shift + H 添加分割线\n            Ctrl + \\\\ 清除格式\n            Alt + S 保存窗口大小和位置\n            Alt + D 删除窗口大小和位置\n            Alt + R 开启同步\n            Alt + T 停止同步\n            Alt + H 打开快捷键列表\n          `;\n          alert(help.split(\"\\n\").map(l=>l.trim()).filter(Boolean).join(\"\\n\"));\n        }\n      });\n    });\n    ///// alt+s 保存窗口位置 ////\n    const restoreWindowPositionAndSize = () => {\n      const windowInfo = localStorage.getItem('windowInfo');\n      if (windowInfo) {\n        const { width, height, left, top } = JSON.parse(windowInfo);\n        window.resizeTo(width, height);\n        window.moveTo(left, top);\n      }\n    }\n    const saveWindowPositionAndSize = (event) => {\n      const windowInfo = {\n      width: window.outerWidth,\n      height: window.outerHeight,\n      left: window.screenX,\n      top: window.screenY\n      };\n      // 使用 localStorage 保存所有信息为一个 JSON 字符串\n      localStorage.setItem('windowInfo', JSON.stringify(windowInfo));\n    }\n    window.addEventListener('load', restoreWindowPositionAndSize);\n    document.addEventListener('keydown', async (event) => {\n      // 保存窗口大小和位置 Alt + S\n      if (event.altKey && event.code === 'KeyS' && !event.shiftKey && !event.ctrlKey && !event.metaKey) {\n        event.preventDefault(); // 防止浏览器默认行为（如页面保存）\n        saveWindowPositionAndSize(); // 调用保存数据的函数\n      }\n      // 清除窗口大小和位置 Alt + D\n      if (event.altKey && event.code === 'KeyD' && !event.shiftKey && !event.ctrlKey && !event.metaKey) {\n        event.preventDefault(); // 防止浏览器默认行为（如页面保存）\n        localStorage.removeItem('windowInfo'); //清除窗口位置\n      }\n      // alt + R 开启同步\n      if (event.altKey && event.code === 'KeyR' && !event.shiftKey && !event.ctrlKey && !event.metaKey) {\n        event.preventDefault(); // 防止浏览器默认行为（如页面保存）\n        if(!window.webdavClient) {\n          alert('无法同步数据，请先在uTools中输入“钉住文本配置”，去配置WebDav');\n          return;\n        }\n        if(isSync) {\n          alert('已经是同步状态！');\n          return;\n        }\n        if(editor.textContent) {\n          if(!confirm(\"‼️检测到您当前的文本框不为空，您确定要同步吗？\\n同步时可能会用远程内容覆盖文本框内容！\\n请务必做好备份工作！！！\")) return;\n        }\n        localStorage.setItem('isSync', true); //开启同步\n        isSync = true;\n        const remoteFile = await getWebDavFile();\n        if(remoteFile) editor.innerHTML = remoteFile;\n      }\n      // alt + T 取消同步\n      if (event.altKey && event.code === 'KeyT' && !event.shiftKey && !event.ctrlKey && !event.metaKey) {\n        event.preventDefault(); // 防止浏览器默认行为（如页面保存）\n        if(!isSync) {\n          alert('已经是未同步状态！');\n          return;\n        }\n        // if(editor.textContent) {\n        //   if(!confirm(\"⚠️检测到您当前的文本框不为空，您确定要取消同步吗？\\n取消同步将使用本地数据覆盖文本框内容！\")) return;\n        // }\n        localStorage.removeItem('isSync'); //清除同步\n        isSync = false;\n        // editor.innerHTML = localStorage.getItem('pinText') || '';\n        setSyncFlag();\n      }\n    });\n\n    async function getWebDavFile() {\n      const client = webdavClient;\n      const remotePath = '/pinText/pinText.html';\n      try {\n        setSyncFlag('syncing');\n        const exists = await client.exists(remotePath);\n        if(!exists) return '';\n        const remoteContent = await client.getFileContents(remotePath, { format: \"text\" });\n        setSyncFlag(true);\n        return remoteContent;\n      } catch (error) {\n        setSyncFlag(false);\n        console.error('获取远程文件失败:', error);\n        return '';\n      }\n    }\n\n    function setSyncFlag(sucess) {\n      if(sucess === true) document.body.style.borderTopColor = 'green';\n      else if(sucess === false) document.body.style.borderTopColor = 'red';\n      else if(sucess === 'syncing') document.body.style.borderTopColor = 'orange';\n      else document.body.style.borderTopColor = 'white';\n    }\n   \n    let syncTimer = 0;\n    async function syncFile(delay = 500) {\n      if(syncTimer) clearTimeout(syncTimer);\n      syncTimer = setTimeout(()=> doSyncFile(), delay);\n    }\n    async function doSyncFile() {\n      const client = webdavClient;\n      const remoteDir = '/pinText'; // 目录路径\n      const remotePath = '/pinText/pinText.html';\n      const localContent = localStorage.getItem(\"pinText\") || \"\";\n\n      try {\n        // 检查并创建目录（如果不存在）\n        setSyncFlag('syncing');\n        const dirExists = await client.exists(remoteDir);\n        if (!dirExists) {\n          console.log('目录不存在，正在创建:', remoteDir);\n          await client.createDirectory(remoteDir);\n          console.log('目录创建成功');\n        }\n        const exists = await client.exists(remotePath);\n        if (exists) {\n          const remoteContent = await client.getFileContents(remotePath, { format: \"text\" });\n          if (remoteContent !== localContent) {\n            console.log('文件已变更，正在同步...');\n            await client.putFileContents(remotePath, localContent, { overwrite: true });\n            setSyncFlag(true);\n            console.log('同步完成');\n          } else {\n            console.log('文件无变化，无需同步');\n          }\n        } else {\n          console.log('文件不存在，正在创建...');\n          await client.putFileContents(remotePath, localContent);\n          setSyncFlag(true);\n          console.log('文件创建成功');\n        }\n      } catch (error) {\n        setSyncFlag(false);\n        console.error('同步失败:', error);\n      }\n    }\n\n    function getCursorElement() {\n      const selection = window.getSelection();\n      if (selection.rangeCount > 0) {\n        const range = selection.getRangeAt(0);\n        // 获取选择范围的起始位置所在的节点\n        const startContainer = range.startContainer;\n        // 如果起始位置是文本节点，返回其父元素节点\n        const cursorElement = startContainer.nodeType === Node.TEXT_NODE\n        ? startContainer.parentElement\n        : startContainer;\n        return cursorElement;\n      }\n      return null;\n    }\n  </script>\n</head>\n<body id=\"editor\" contenteditable=\"true\"></body>\n</html>",
                        "language": "html",
                        "outputCode": null,
                        "runInTerminal": null,
                        "scriptCode": null
                    },
                    "code": "quickcomposer.coding.base64Decode(\"PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICA8bWV0YSBjaGFyc2V0PSJ1dGYtOCI+CiAgPHRpdGxlPumSieS9j+aWh+acrPCfk4w8L3RpdGxlPgogIDxzdHlsZT4KICAgIGJvZHkgewogICAgICBoZWlnaHQ6IGNhbGMoMTAwdmggLSAxNnB4KTsKICAgICAgYm9yZGVyLXRvcDogMC41cHggc29saWQgd2hpdGU7CiAgICAgIG1hcmdpbjogMDsKICAgICAgcGFkZGluZzogNy43cHg7CiAgICB9CiAgPC9zdHlsZT4KICA8c2NyaXB0IHR5cGU9Im1vZHVsZSI+CiAgICBpbXBvcnQge2NyZWF0ZUNsaWVudH0gZnJvbSAnaHR0cHM6Ly9qc2Qub25taWNyb3NvZnQuY24vbnBtL3dlYmRhdkA1LjguMC8rZXNtJzsKICAgIGxldCB3ZWJkYXYgPSBfX193ZWJkYXZDb25maWdfX187CiAgICB3aW5kb3cud2ViZGF2Q2xpZW50ID0gbnVsbDsKICAgIGlmKHdlYmRhdikgewogICAgICB3aW5kb3cud2ViZGF2Q2xpZW50ID0gY3JlYXRlQ2xpZW50KHdlYmRhdi51cmwsIHsKICAgICAgICB1c2VybmFtZTogd2ViZGF2LnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkOiB3ZWJkYXYucGFzc3dvcmQKICAgICAgfSk7CiAgICB9CiAgPC9zY3JpcHQ+CiAgPHNjcmlwdD4KICAgIGxldCBwYXlsb2FkID0gIl9fX3F1aWNrY29tbWFuZC5lbnRlckRhdGEucGF5bG9hZF9fXyI7CiAgICBsZXQgaXNTeW5jID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lzU3luYycpID09PSAndHJ1ZSc7CiAgICAvLyDliqDovb3miafooYwKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhc3luYyAoKSA9PiB7CiAgICAgIGlmKCF3aW5kb3cud2ViZGF2Q2xpZW50ICYmIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpc0ZpcnN0JykgPT09IG51bGwpIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaXNGaXJzdCcsIHRydWUpOwogICAgICAgIGFsZXJ0KCfmlK/mjIFXZWJEYXblkIzmraXvvIzlj6/lnKh1VG9vbHPkuK3ovpPlhaXigJzpkonkvY/mlofmnKzphY3nva7igJ3vvIzljrvphY3nva5XZWJEYXbvvIzor6Xmj5DnpLrku4XnrKzkuIDmrKHmiZPlvIDml7bmmL7npLrvvIEnKTsKICAgICAgfQogICAgICBpZihpc1N5bmMgJiYgIXdpbmRvdy53ZWJkYXZDbGllbnQpIHsKICAgICAgICBpc1N5bmMgPSBmYWxzZTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaXNTeW5jJywgZmFsc2UpOwogICAgICAgIGFsZXJ0KCfml6Dms5XlkIzmraXmlbDmja7vvIzor7flhYjlnKh1VG9vbHPkuK3ovpPlhaXigJzpkonkvY/mlofmnKzphY3nva7igJ3vvIzljrvphY3nva5XZWJEYXYnKTsKICAgICAgfQogICAgICBjb25zdCBlZGl0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZWRpdG9yIik7CiAgICAgIGNvbnN0IGh0bWwgPSBpc1N5bmMgPyBhd2FpdCBnZXRXZWJEYXZGaWxlKCkgOiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oInBpblRleHQiKXx8IiIpOwogICAgICBlZGl0b3IuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgY29uc3QgaGFzUGF5bG9hZCA9ICEocGF5bG9hZCA9PT0gIumSieS9j+aWh+acrCIgfHwgcGF5bG9hZCA9PT0gInBpblRleHQiKSAmJiBwYXlsb2FkOwogICAgICBpZihoYXNQYXlsb2FkKSB7CiAgICAgICAgZWRpdG9yLmlubmVySFRNTCA9IGVkaXRvci50ZXh0Q29udGVudCA/IHBheWxvYWQgKyAiPGhyIC8+IiArIGh0bWwgOiBwYXlsb2FkOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJwaW5UZXh0IiwgZWRpdG9yLmlubmVySFRNTCk7CiAgICAgICAgaWYoaXNTeW5jKSBzeW5jRmlsZSgpOwogICAgICB9CiAgICAgIHNldFRpbWVvdXQoKCk9PiBlZGl0b3IuZm9jdXMoKSwgMTAwKTsKICAgICAgLy8g6L6T5YWl5LqL5Lu2CiAgICAgIGVkaXRvci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgicGluVGV4dCIsIGVkaXRvci5pbm5lckhUTUwpOwogICAgICAgIGlmKGlzU3luYykgc3luY0ZpbGUoKTsKICAgICAgfSk7CiAgICAgIC8vIOebkeWQrOaVsOaNruWPmOWMlgogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoZS5rZXkgPT09ICdwaW5UZXh0JykgewogICAgICAgICAgZWRpdG9yLmlubmVySFRNTCA9IGUubmV3VmFsdWU7CiAgICAgICAgICBpZihpc1N5bmMpIHN5bmNGaWxlKCk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIC8vIOiHquWumuS5ieW/q+aNt+mUrgogICAgICBlZGl0b3IuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAvLyDmo4DmtYsgQ3RybCArIFNoaWZ0ICsgUyDvvIjmiJYgTWFjIOS4iueahCBDbWQgKyBTaGlmdCArIFPvvIkKICAgICAgICBpZiAoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIGUuc2hpZnRLZXkgJiYgZS5jb2RlID09PSAnS2V5UycgJiYgIWUuYWx0S2V5KSB7CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIOmYu+atoum7mOiupOS/neWtmOihjOS4ugogICAgICAgICAgLy8g5omn6KGM5Yig6Zmk57q/5ZG95LukCiAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnc3RyaWtldGhyb3VnaCcsIGZhbHNlLCBudWxsKTsKICAgICAgICAgIC8vIOWPr+mAie+8muiBmueEpuWbnue8lui+keWZqO+8iOehruS/neWFieagh+S9jee9ruato+ehru+8iQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBlZGl0b3IuZm9jdXMoKSwgMCk7CiAgICAgICAgfQogICAgICAgIC8vIGN0cmwrayDmt7vliqDpk77mjqUKICAgICAgICBpZiAoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIGUuY29kZSA9PT0gJ0tleUsnICYmICFlLmFsdEtleSAmJiAhZS5zaGlmdEtleSkgewogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgaWYoZ2V0Q3Vyc29yRWxlbWVudCgpPy5jbG9zZXN0KCdhW2hyZWZdJykpewogICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgndW5saW5rJywgZmFsc2UsIG51bGwpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpOwogICAgICAgICAgICBjb25zdCBzZWxlY3RlZFRleHQgPSBzZWxlY3Rpb24udG9TdHJpbmcoKS50cmltKCk7CiAgICAgICAgICAgIGlmKHNlbGVjdGVkVGV4dCAmJiAvXmh0dHBzPzpcL1wvL2kudGVzdChzZWxlY3RlZFRleHQpKSBkb2N1bWVudC5leGVjQ29tbWFuZCgnY3JlYXRlTGluaycsIGZhbHNlLCBzZWxlY3RlZFRleHQpOwogICAgICAgICAgfQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBlZGl0b3IuZm9jdXMoKSwgMCk7CiAgICAgICAgfQogICAgICAgIC8vIGN0cmwrc2hpZnQrYyDmoIfnuqIKICAgICAgICBpZiAoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIGUuc2hpZnRLZXkgJiYgZS5jb2RlID09PSAnS2V5QycgJiYgIWUuYWx0S2V5KSB7CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBpZihnZXRDdXJzb3JFbGVtZW50KCk/LmNsb3Nlc3QoJ2ZvbnRbY29sb3JdJykpIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdyZW1vdmVGb3JtYXQnLCBmYWxzZSwgbnVsbCk7CiAgICAgICAgICBlbHNlIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdmb3JlQ29sb3InLCBmYWxzZSwgIiNGRjAwMDAiKTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZWRpdG9yLmZvY3VzKCksIDApOwogICAgICAgIH0KICAgICAgICAvLyDmuIXpmaTmoLzlvI8gY3RybCtcCiAgICAgICAgaWYgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiBlLmNvZGUgPT09ICdCYWNrc2xhc2gnICYmICFlLmFsdEtleSAmJiAhZS5zaGlmdEtleSkgewogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3JlbW92ZUZvcm1hdCcsIGZhbHNlLCBudWxsKTsKICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmxpbmsnLCBmYWxzZSwgbnVsbCk7CiAgICAgICAgfQogICAgICAgIC8vIEN0cmwrU2hpZnQrSCDmt7vliqBocuWIhuWJsue6vwogICAgICAgIGlmICgoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkgJiYgZS5zaGlmdEtleSAmJiBlLmNvZGUgPT09ICdLZXlIJyAmJiAhZS5hbHRLZXkpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRIb3Jpem9udGFsUnVsZScsIGZhbHNlLCBudWxsKTsKICAgICAgICB9CiAgICAgICAgLy8gQXRsK0gg5p+l55yL5biu5YqpCiAgICAgICAgaWYgKGUuYWx0S2V5ICYmIGUuY29kZSA9PT0gJ0tleUgnICYmICFlLmN0cmxLZXkgJiYgIWUubWV0YUtleSAmJiAhZS5zaGlmdEtleSkgewogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgY29uc3QgaGVscCA9IGAKICAgICAgICAgICAg5b+r5o236ZSu77yaCiAgICAgICAgICAgIEN0cmwgKyBCIOWKoOeylwogICAgICAgICAgICBDdHJsICsgSSDmlpzkvZMKICAgICAgICAgICAgQ3RybCArIFUg5LiL5YiS57q/CiAgICAgICAgICAgIEN0cmwgKyBTaGlmdCArIFMg5Yig6Zmk57q/CiAgICAgICAgICAgIEN0cmwgKyBTaGlmdCArIEMg5paH5a2X5qCH57qiCiAgICAgICAgICAgIEN0cmwgKyBLIOa3u+WKoOmTvuaOpQogICAgICAgICAgICBDdHJsICsgU2hpZnQgKyBIIOa3u+WKoOWIhuWJsue6vwogICAgICAgICAgICBDdHJsICsgXFwg5riF6Zmk5qC85byPCiAgICAgICAgICAgIEFsdCArIFMg5L+d5a2Y56qX5Y+j5aSn5bCP5ZKM5L2N572uCiAgICAgICAgICAgIEFsdCArIEQg5Yig6Zmk56qX5Y+j5aSn5bCP5ZKM5L2N572uCiAgICAgICAgICAgIEFsdCArIFIg5byA5ZCv5ZCM5q2lCiAgICAgICAgICAgIEFsdCArIFQg5YGc5q2i5ZCM5q2lCiAgICAgICAgICAgIEFsdCArIEgg5omT5byA5b+r5o236ZSu5YiX6KGoCiAgICAgICAgICBgOwogICAgICAgICAgYWxlcnQoaGVscC5zcGxpdCgiXG4iKS5tYXAobD0+bC50cmltKCkpLmZpbHRlcihCb29sZWFuKS5qb2luKCJcbiIpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgICAvLy8vLyBhbHQrcyDkv53lrZjnqpflj6PkvY3nva4gLy8vLwogICAgY29uc3QgcmVzdG9yZVdpbmRvd1Bvc2l0aW9uQW5kU2l6ZSA9ICgpID0+IHsKICAgICAgY29uc3Qgd2luZG93SW5mbyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd3aW5kb3dJbmZvJyk7CiAgICAgIGlmICh3aW5kb3dJbmZvKSB7CiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0LCBsZWZ0LCB0b3AgfSA9IEpTT04ucGFyc2Uod2luZG93SW5mbyk7CiAgICAgICAgd2luZG93LnJlc2l6ZVRvKHdpZHRoLCBoZWlnaHQpOwogICAgICAgIHdpbmRvdy5tb3ZlVG8obGVmdCwgdG9wKTsKICAgICAgfQogICAgfQogICAgY29uc3Qgc2F2ZVdpbmRvd1Bvc2l0aW9uQW5kU2l6ZSA9IChldmVudCkgPT4gewogICAgICBjb25zdCB3aW5kb3dJbmZvID0gewogICAgICB3aWR0aDogd2luZG93Lm91dGVyV2lkdGgsCiAgICAgIGhlaWdodDogd2luZG93Lm91dGVySGVpZ2h0LAogICAgICBsZWZ0OiB3aW5kb3cuc2NyZWVuWCwKICAgICAgdG9wOiB3aW5kb3cuc2NyZWVuWQogICAgICB9OwogICAgICAvLyDkvb/nlKggbG9jYWxTdG9yYWdlIOS/neWtmOaJgOacieS/oeaBr+S4uuS4gOS4qiBKU09OIOWtl+espuS4sgogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnd2luZG93SW5mbycsIEpTT04uc3RyaW5naWZ5KHdpbmRvd0luZm8pKTsKICAgIH0KICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzdG9yZVdpbmRvd1Bvc2l0aW9uQW5kU2l6ZSk7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgYXN5bmMgKGV2ZW50KSA9PiB7CiAgICAgIC8vIOS/neWtmOeql+WPo+Wkp+Wwj+WSjOS9jee9riBBbHQgKyBTCiAgICAgIGlmIChldmVudC5hbHRLZXkgJiYgZXZlbnQuY29kZSA9PT0gJ0tleVMnICYmICFldmVudC5zaGlmdEtleSAmJiAhZXZlbnQuY3RybEtleSAmJiAhZXZlbnQubWV0YUtleSkgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIOmYsuatoua1j+iniOWZqOm7mOiupOihjOS4uu+8iOWmgumhtemdouS/neWtmO+8iQogICAgICAgIHNhdmVXaW5kb3dQb3NpdGlvbkFuZFNpemUoKTsgLy8g6LCD55So5L+d5a2Y5pWw5o2u55qE5Ye95pWwCiAgICAgIH0KICAgICAgLy8g5riF6Zmk56qX5Y+j5aSn5bCP5ZKM5L2N572uIEFsdCArIEQKICAgICAgaWYgKGV2ZW50LmFsdEtleSAmJiBldmVudC5jb2RlID09PSAnS2V5RCcgJiYgIWV2ZW50LnNoaWZ0S2V5ICYmICFldmVudC5jdHJsS2V5ICYmICFldmVudC5tZXRhS2V5KSB7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8g6Ziy5q2i5rWP6KeI5Zmo6buY6K6k6KGM5Li677yI5aaC6aG16Z2i5L+d5a2Y77yJCiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3dpbmRvd0luZm8nKTsgLy/muIXpmaTnqpflj6PkvY3nva4KICAgICAgfQogICAgICAvLyBhbHQgKyBSIOW8gOWQr+WQjOatpQogICAgICBpZiAoZXZlbnQuYWx0S2V5ICYmIGV2ZW50LmNvZGUgPT09ICdLZXlSJyAmJiAhZXZlbnQuc2hpZnRLZXkgJiYgIWV2ZW50LmN0cmxLZXkgJiYgIWV2ZW50Lm1ldGFLZXkpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyDpmLLmraLmtY/op4jlmajpu5jorqTooYzkuLrvvIjlpoLpobXpnaLkv53lrZjvvIkKICAgICAgICBpZighd2luZG93LndlYmRhdkNsaWVudCkgewogICAgICAgICAgYWxlcnQoJ+aXoOazleWQjOatpeaVsOaNru+8jOivt+WFiOWcqHVUb29sc+S4rei+k+WFpeKAnOmSieS9j+aWh+acrOmFjee9ruKAne+8jOWOu+mFjee9rldlYkRhdicpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZihpc1N5bmMpIHsKICAgICAgICAgIGFsZXJ0KCflt7Lnu4/mmK/lkIzmraXnirbmgIHvvIEnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYoZWRpdG9yLnRleHRDb250ZW50KSB7CiAgICAgICAgICBpZighY29uZmlybSgi4oC877iP5qOA5rWL5Yiw5oKo5b2T5YmN55qE5paH5pys5qGG5LiN5Li656m677yM5oKo56Gu5a6a6KaB5ZCM5q2l5ZCX77yfXG7lkIzmraXml7blj6/og73kvJrnlKjov5znqIvlhoXlrrnopobnm5bmlofmnKzmoYblhoXlrrnvvIFcbuivt+WKoeW/heWBmuWlveWkh+S7veW3peS9nO+8ge+8ge+8gSIpKSByZXR1cm47CiAgICAgICAgfQogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpc1N5bmMnLCB0cnVlKTsgLy/lvIDlkK/lkIzmraUKICAgICAgICBpc1N5bmMgPSB0cnVlOwogICAgICAgIGNvbnN0IHJlbW90ZUZpbGUgPSBhd2FpdCBnZXRXZWJEYXZGaWxlKCk7CiAgICAgICAgaWYocmVtb3RlRmlsZSkgZWRpdG9yLmlubmVySFRNTCA9IHJlbW90ZUZpbGU7CiAgICAgIH0KICAgICAgLy8gYWx0ICsgVCDlj5bmtojlkIzmraUKICAgICAgaWYgKGV2ZW50LmFsdEtleSAmJiBldmVudC5jb2RlID09PSAnS2V5VCcgJiYgIWV2ZW50LnNoaWZ0S2V5ICYmICFldmVudC5jdHJsS2V5ICYmICFldmVudC5tZXRhS2V5KSB7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8g6Ziy5q2i5rWP6KeI5Zmo6buY6K6k6KGM5Li677yI5aaC6aG16Z2i5L+d5a2Y77yJCiAgICAgICAgaWYoIWlzU3luYykgewogICAgICAgICAgYWxlcnQoJ+W3sue7j+aYr+acquWQjOatpeeKtuaAge+8gScpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvLyBpZihlZGl0b3IudGV4dENvbnRlbnQpIHsKICAgICAgICAvLyAgIGlmKCFjb25maXJtKCLimqDvuI/mo4DmtYvliLDmgqjlvZPliY3nmoTmlofmnKzmoYbkuI3kuLrnqbrvvIzmgqjnoa7lrpropoHlj5bmtojlkIzmraXlkJfvvJ9cbuWPlua2iOWQjOatpeWwhuS9v+eUqOacrOWcsOaVsOaNruimhuebluaWh+acrOahhuWGheWuue+8gSIpKSByZXR1cm47CiAgICAgICAgLy8gfQogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpc1N5bmMnKTsgLy/muIXpmaTlkIzmraUKICAgICAgICBpc1N5bmMgPSBmYWxzZTsKICAgICAgICAvLyBlZGl0b3IuaW5uZXJIVE1MID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BpblRleHQnKSB8fCAnJzsKICAgICAgICBzZXRTeW5jRmxhZygpOwogICAgICB9CiAgICB9KTsKCiAgICBhc3luYyBmdW5jdGlvbiBnZXRXZWJEYXZGaWxlKCkgewogICAgICBjb25zdCBjbGllbnQgPSB3ZWJkYXZDbGllbnQ7CiAgICAgIGNvbnN0IHJlbW90ZVBhdGggPSAnL3BpblRleHQvcGluVGV4dC5odG1sJzsKICAgICAgdHJ5IHsKICAgICAgICBzZXRTeW5jRmxhZygnc3luY2luZycpOwogICAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IGNsaWVudC5leGlzdHMocmVtb3RlUGF0aCk7CiAgICAgICAgaWYoIWV4aXN0cykgcmV0dXJuICcnOwogICAgICAgIGNvbnN0IHJlbW90ZUNvbnRlbnQgPSBhd2FpdCBjbGllbnQuZ2V0RmlsZUNvbnRlbnRzKHJlbW90ZVBhdGgsIHsgZm9ybWF0OiAidGV4dCIgfSk7CiAgICAgICAgc2V0U3luY0ZsYWcodHJ1ZSk7CiAgICAgICAgcmV0dXJuIHJlbW90ZUNvbnRlbnQ7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgc2V0U3luY0ZsYWcoZmFsc2UpOwogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPlui/nOeoi+aWh+S7tuWksei0pTonLCBlcnJvcik7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0U3luY0ZsYWcoc3VjZXNzKSB7CiAgICAgIGlmKHN1Y2VzcyA9PT0gdHJ1ZSkgZG9jdW1lbnQuYm9keS5zdHlsZS5ib3JkZXJUb3BDb2xvciA9ICdncmVlbic7CiAgICAgIGVsc2UgaWYoc3VjZXNzID09PSBmYWxzZSkgZG9jdW1lbnQuYm9keS5zdHlsZS5ib3JkZXJUb3BDb2xvciA9ICdyZWQnOwogICAgICBlbHNlIGlmKHN1Y2VzcyA9PT0gJ3N5bmNpbmcnKSBkb2N1bWVudC5ib2R5LnN0eWxlLmJvcmRlclRvcENvbG9yID0gJ29yYW5nZSc7CiAgICAgIGVsc2UgZG9jdW1lbnQuYm9keS5zdHlsZS5ib3JkZXJUb3BDb2xvciA9ICd3aGl0ZSc7CiAgICB9CiAgIAogICAgbGV0IHN5bmNUaW1lciA9IDA7CiAgICBhc3luYyBmdW5jdGlvbiBzeW5jRmlsZShkZWxheSA9IDUwMCkgewogICAgICBpZihzeW5jVGltZXIpIGNsZWFyVGltZW91dChzeW5jVGltZXIpOwogICAgICBzeW5jVGltZXIgPSBzZXRUaW1lb3V0KCgpPT4gZG9TeW5jRmlsZSgpLCBkZWxheSk7CiAgICB9CiAgICBhc3luYyBmdW5jdGlvbiBkb1N5bmNGaWxlKCkgewogICAgICBjb25zdCBjbGllbnQgPSB3ZWJkYXZDbGllbnQ7CiAgICAgIGNvbnN0IHJlbW90ZURpciA9ICcvcGluVGV4dCc7IC8vIOebruW9lei3r+W+hAogICAgICBjb25zdCByZW1vdGVQYXRoID0gJy9waW5UZXh0L3BpblRleHQuaHRtbCc7CiAgICAgIGNvbnN0IGxvY2FsQ29udGVudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwaW5UZXh0IikgfHwgIiI7CgogICAgICB0cnkgewogICAgICAgIC8vIOajgOafpeW5tuWIm+W7uuebruW9le+8iOWmguaenOS4jeWtmOWcqO+8iQogICAgICAgIHNldFN5bmNGbGFnKCdzeW5jaW5nJyk7CiAgICAgICAgY29uc3QgZGlyRXhpc3RzID0gYXdhaXQgY2xpZW50LmV4aXN0cyhyZW1vdGVEaXIpOwogICAgICAgIGlmICghZGlyRXhpc3RzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn55uu5b2V5LiN5a2Y5Zyo77yM5q2j5Zyo5Yib5bu6OicsIHJlbW90ZURpcik7CiAgICAgICAgICBhd2FpdCBjbGllbnQuY3JlYXRlRGlyZWN0b3J5KHJlbW90ZURpcik7CiAgICAgICAgICBjb25zb2xlLmxvZygn55uu5b2V5Yib5bu65oiQ5YqfJyk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IGNsaWVudC5leGlzdHMocmVtb3RlUGF0aCk7CiAgICAgICAgaWYgKGV4aXN0cykgewogICAgICAgICAgY29uc3QgcmVtb3RlQ29udGVudCA9IGF3YWl0IGNsaWVudC5nZXRGaWxlQ29udGVudHMocmVtb3RlUGF0aCwgeyBmb3JtYXQ6ICJ0ZXh0IiB9KTsKICAgICAgICAgIGlmIChyZW1vdGVDb250ZW50ICE9PSBsb2NhbENvbnRlbnQpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+aWh+S7tuW3suWPmOabtO+8jOato+WcqOWQjOatpS4uLicpOwogICAgICAgICAgICBhd2FpdCBjbGllbnQucHV0RmlsZUNvbnRlbnRzKHJlbW90ZVBhdGgsIGxvY2FsQ29udGVudCwgeyBvdmVyd3JpdGU6IHRydWUgfSk7CiAgICAgICAgICAgIHNldFN5bmNGbGFnKHRydWUpOwogICAgICAgICAgICBjb25zb2xlLmxvZygn5ZCM5q2l5a6M5oiQJyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygn5paH5Lu25peg5Y+Y5YyW77yM5peg6ZyA5ZCM5q2lJyk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfmlofku7bkuI3lrZjlnKjvvIzmraPlnKjliJvlu7ouLi4nKTsKICAgICAgICAgIGF3YWl0IGNsaWVudC5wdXRGaWxlQ29udGVudHMocmVtb3RlUGF0aCwgbG9jYWxDb250ZW50KTsKICAgICAgICAgIHNldFN5bmNGbGFnKHRydWUpOwogICAgICAgICAgY29uc29sZS5sb2coJ+aWh+S7tuWIm+W7uuaIkOWKnycpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBzZXRTeW5jRmxhZyhmYWxzZSk7CiAgICAgICAgY29uc29sZS5lcnJvcign5ZCM5q2l5aSx6LSlOicsIGVycm9yKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldEN1cnNvckVsZW1lbnQoKSB7CiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsKICAgICAgaWYgKHNlbGVjdGlvbi5yYW5nZUNvdW50ID4gMCkgewogICAgICAgIGNvbnN0IHJhbmdlID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoMCk7CiAgICAgICAgLy8g6I635Y+W6YCJ5oup6IyD5Zu055qE6LW35aeL5L2N572u5omA5Zyo55qE6IqC54K5CiAgICAgICAgY29uc3Qgc3RhcnRDb250YWluZXIgPSByYW5nZS5zdGFydENvbnRhaW5lcjsKICAgICAgICAvLyDlpoLmnpzotbflp4vkvY3nva7mmK/mlofmnKzoioLngrnvvIzov5Tlm57lhbbniLblhYPntKDoioLngrkKICAgICAgICBjb25zdCBjdXJzb3JFbGVtZW50ID0gc3RhcnRDb250YWluZXIubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFCiAgICAgICAgPyBzdGFydENvbnRhaW5lci5wYXJlbnRFbGVtZW50CiAgICAgICAgOiBzdGFydENvbnRhaW5lcjsKICAgICAgICByZXR1cm4gY3Vyc29yRWxlbWVudDsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICA8L3NjcmlwdD4KPC9oZWFkPgo8Ym9keSBpZD0iZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiPjwvYm9keT4KPC9odG1sPg==\").replace('___webdavConfig___', webdavConfig).replace('\"___quickcommand.enterData.payload___\"', JSON.stringify(quickcommand.enterData.payload))",
                    "id": "6bc7266a-6447-4402-82f4-112fa1d352c5",
                    "isCollapsed": true,
                    "outputVariable": {
                        "name": "codeSnippet"
                    },
                    "userComments": "钉住窗口代码"
                },
                {
                    "value": "utools.getPath",
                    "defaultValue": "home",
                    "argvs": [
                        "temp"
                    ],
                    "code": "utools.getPath(\"temp\")",
                    "id": "49a0f4cd-8028-44d1-a7ef-a8c23552c4a0",
                    "isCollapsed": true,
                    "outputVariable": {
                        "name": "systemPath"
                    },
                    "subCommand": "utools.getPath"
                },
                {
                    "value": "utools.isMacOS",
                    "argvs": [],
                    "code": "utools.isWindows()",
                    "id": "f7f9b883-9840-4590-9d6f-b7c589edf29c",
                    "isCollapsed": true,
                    "outputVariable": {
                        "name": "isWindows"
                    },
                    "subCommand": "utools.isWindows"
                },
                {
                    "value": "quickcommand.runCode",
                    "description": "运行各种编程语言的代码，需要预安装对应的执行环境",
                    "asyncMode": "await",
                    "argvs": {
                        "args": [],
                        "code": "",
                        "language": "javascript",
                        "outputCode": null,
                        "runInTerminal": null,
                        "scriptCode": null
                    },
                    "code": "quickcommand.runCode(\"\", {\n    \"language\": \"javascript\"\n  })",
                    "id": "11f7aa5c-7fb1-48ff-a98d-6bec9f43ddc5",
                    "isCollapsed": true,
                    "outputVariable": {
                        "name": "pinTextPage"
                    }
                },
                {
                    "value": "injectJs",
                    "description": "注入的代码（js）将在流程对应的位置直接运行。",
                    "neverHasOutput": true,
                    "isExpression": true,
                    "argvs": [
                        "pinTextPage = (systemPath + (isWindows ? '\\\\' : '/') + 'pinTextPage.html').replace(/\\/+/g, '/').replace(/(\\\\)+/g, '\\\\')"
                    ],
                    "code": "pinTextPage = (systemPath + (isWindows ? '\\\\' : '/') + 'pinTextPage.html').replace(/\\/+/g, '/').replace(/(\\\\)+/g, '\\\\')",
                    "disabled": false,
                    "id": "0f001583-7ef3-457f-bfe4-3b526c5e7125",
                    "isCollapsed": true,
                    "subCommand": "injectJs",
                    "userComments": "生成pinTextPage文件路径"
                },
                {
                    "value": "quickcomposer.file.operation",
                    "asyncMode": "await",
                    "argvs": {
                        "content": {
                            "__varInputVal__": true,
                            "isString": false,
                            "value": "codeSnippet"
                        },
                        "encoding": "utf8",
                        "filePath": {
                            "__varInputVal__": true,
                            "isString": false,
                            "value": "pinTextPage"
                        },
                        "followSymlinks": true,
                        "force": false,
                        "length": 100,
                        "mode": "644",
                        "operation": "write",
                        "operationType": "chmod",
                        "readMode": "all",
                        "recursive": false,
                        "showHidden": false,
                        "start": 0,
                        "targetType": "file",
                        "transferOperation": "rename",
                        "writeFlag": "777",
                        "writeMode": "write"
                    },
                    "code": "quickcomposer.file.operation({\n    \"operation\": \"write\",\n    \"filePath\": pinTextPage,\n    \"encoding\": \"utf8\",\n    \"content\": codeSnippet,\n    \"flag\": \"w\",\n    \"mode\": \"777\"\n  })",
                    "disabled": false,
                    "id": "6c9019d2-4bf0-440b-90e5-f2c4bb73a654",
                    "isCollapsed": true
                },
                {
                    "value": "ubrowser",
                    "asyncMode": "await",
                    "argvs": {
                        "goto": {
                            "headers": {
                                "": {
                                    "__varInputVal__": true,
                                    "isString": true,
                                    "value": ""
                                }
                            },
                            "url": {
                                "__varInputVal__": true,
                                "isString": false,
                                "value": "'file://'+pinTextPage"
                            }
                        },
                        "operations": [],
                        "run": {
                            "alwaysOnTop": true,
                            "height": 438,
                            "width": 369
                        }
                    },
                    "code": "utools.ubrowser.goto('file://'+pinTextPage)\n  .run({\n    \"alwaysOnTop\": true,\n    \"width\": 369,\n    \"height\": 438\n  })",
                    "disabled": false,
                    "id": "0f4ea2a5-b105-4f64-8a34-8634ca2f5681",
                    "isCollapsed": true,
                    "outputVariable": {
                        "name": "browser"
                    },
                    "userComments": ""
                },
                {
                    "value": "utools.outPlugin",
                    "neverHasOutput": true,
                    "argvs": [
                        false
                    ],
                    "code": "utools.outPlugin(false)",
                    "disabled": false,
                    "id": "7058d7d6-ce86-4d04-b133-d689465a1a51",
                    "isCollapsed": true,
                    "subCommand": "utools.outPlugin"
                }
            ],
            "customVariables": [],
            "id": "main",
            "label": "主流程",
            "name": "main"
        }
    ],
    "order": 1
}